import{j as e,b as d,d as s,a5 as i,B as v,ar as y,as as u,at as C,Z as M,ac as T,ad as S,ae as I,af as f,ag as n,ah as w,t as $,q as g,e as z,U as D}from"./mui-vendor-B9ia8S_J.js";import{r as R}from"./react-vendor-Dc2dUCgt.js";import{a as W,b as O,u as P}from"./index-CqppG3Ma.js";import{M as c}from"./ModernCard-OCZcHO9e.js";import{m as G}from"./framer-motion-BW_lnxQT.js";const Z=()=>{const{visitors:k,attendance:A,currentClub:F,clubs:p}=W(),{mode:r}=O(),{user:m}=P(),[x,E]=R.useState(new Date),j=m?.role==="super_admin"?p:p.filter(t=>t.id===F?.id||t.createdBy===m?.id),l=j.map(t=>{const a=k.filter(o=>o.clubId===t.id&&o.type==="member"),h=A.filter(o=>{const B=new Date(o.date);return o.clubId===t.id&&B.toDateString()===x.toDateString()});return{club:t,totalMembers:a.length,present:h.filter(o=>o.status==="present").length,absent:h.filter(o=>o.status==="absent").length,attendanceRate:a.length>0?Math.round(h.filter(o=>o.status==="present").length/a.length*100):0}}),b={totalMembers:l.reduce((t,a)=>t+a.totalMembers,0),present:l.reduce((t,a)=>t+a.present,0),absent:l.reduce((t,a)=>t+a.absent,0),attendanceRate:l.length>0?Math.round(l.reduce((t,a)=>t+a.attendanceRate,0)/l.length):0};return e.jsxs(d,{sx:{p:3,position:"relative",minHeight:"100%"},children:[e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(s,{variant:"h4",sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:"bold",mb:4},children:"Attendance Overview"})}),e.jsxs(i,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(i,{size:{xs:12,sm:6,md:3},children:e.jsx(c,{children:e.jsxs(d,{sx:{textAlign:"center"},children:[e.jsx(v,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontSize:32,mb:1}}),e.jsx(s,{variant:"h4",sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:"bold"},children:j.length}),e.jsx(s,{variant:"body2",sx:{color:r==="dark"?"#94A3B8":"#64748B"},children:"Total Clubs"})]})})}),e.jsx(i,{size:{xs:12,sm:6,md:3},children:e.jsx(c,{children:e.jsxs(d,{sx:{textAlign:"center"},children:[e.jsx(y,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontSize:32,mb:1}}),e.jsx(s,{variant:"h4",sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:"bold"},children:b.totalMembers}),e.jsx(s,{variant:"body2",sx:{color:r==="dark"?"#94A3B8":"#64748B"},children:"Total Members"})]})})}),e.jsx(i,{size:{xs:12,sm:6,md:3},children:e.jsx(c,{children:e.jsxs(d,{sx:{textAlign:"center"},children:[e.jsx(u,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontSize:32,mb:1}}),e.jsx(s,{variant:"h4",sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:"bold"},children:b.present}),e.jsx(s,{variant:"body2",sx:{color:r==="dark"?"#94A3B8":"#64748B"},children:"Present Today"})]})})}),e.jsx(i,{size:{xs:12,sm:6,md:3},children:e.jsx(c,{children:e.jsxs(d,{sx:{textAlign:"center"},children:[e.jsx(C,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontSize:32,mb:1}}),e.jsx(s,{variant:"h4",sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:"bold"},children:b.absent}),e.jsx(s,{variant:"body2",sx:{color:r==="dark"?"#94A3B8":"#64748B"},children:"Absent Today"})]})})})]}),e.jsxs(c,{children:[e.jsx(d,{sx:{mb:4},children:e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(s,{variant:"h6",sx:{color:r==="dark"?"#3b82f6":"#2563eb"},children:["Club Attendance for ",x.toLocaleDateString()]}),e.jsx(d,{sx:{width:"200px"},children:e.jsx(M,{type:"date",fullWidth:!0,size:"small",value:x.toISOString().split("T")[0],onChange:t=>E(new Date(t.target.value)),InputProps:{sx:{color:r==="dark"?"#F8FAFC":"#0F172A","& .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#475569":"#E2E8F0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#3b82f6":"#2563eb"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#3b82f6":"#2563eb"}}}})})]})}),e.jsx(T,{children:e.jsxs(S,{children:[e.jsx(I,{children:e.jsxs(f,{children:[e.jsx(n,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:"Club Name"}),e.jsx(n,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:"Total Members"}),e.jsx(n,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:"Present"}),e.jsx(n,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:"Absent"}),e.jsx(n,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:"Attendance Rate"})]})}),e.jsx(w,{children:l.map(t=>e.jsxs(f,{children:[e.jsx(n,{sx:{borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx($,{sx:{bgcolor:r==="dark"?"#3b82f6":"#2563eb"},children:t.club.name.charAt(0)}),e.jsx(s,{sx:{color:r==="dark"?"#F8FAFC":"#0F172A"},children:t.club.name})]})}),e.jsx(n,{sx:{color:r==="dark"?"#F8FAFC":"#0F172A",borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:t.totalMembers}),e.jsx(n,{sx:{borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:e.jsx(g,{label:t.present,sx:{bgcolor:r==="dark"?"#3b82f620":"#2563eb20",color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:600,borderRadius:"6px"}})}),e.jsx(n,{sx:{borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:e.jsx(g,{label:t.absent,sx:{bgcolor:r==="dark"?"#3b82f620":"#2563eb20",color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:600,borderRadius:"6px"}})}),e.jsx(n,{sx:{borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:e.jsxs(s,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:"bold"},children:[t.attendanceRate,"%"]})})]},t.club.id))})]})})]}),e.jsx(z,{title:"Mark Attendance",placement:"left",children:e.jsx(D,{color:"primary",onClick:()=>{},sx:{position:"fixed",bottom:32,right:32,background:r==="dark"?"linear-gradient(135deg, #3b82f6, #2563eb)":"linear-gradient(135deg, #2563eb, #1d4ed8)",color:"white",boxShadow:r==="dark"?"0 4px 12px rgba(59, 130, 246, 0.5)":"0 4px 12px rgba(37, 99, 235, 0.5)","&:hover":{background:r==="dark"?"linear-gradient(135deg, #2563eb, #1d4ed8)":"linear-gradient(135deg, #1d4ed8, #1e40af)",boxShadow:r==="dark"?"0 6px 16px rgba(59, 130, 246, 0.6)":"0 6px 16px rgba(37, 99, 235, 0.6)"}},children:e.jsx(u,{})})})]})};export{Z as AttendancePage};
