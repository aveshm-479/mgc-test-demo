import{j as r,b as t,d,G as Z,H as $,K as J,f as ee,ao as re,W as B,X as A,Y as D,Z as y,$ as v,_ as p,ap as h,aq as oe,z as de,e as te,U as ae,V as ne}from"./mui-vendor-B9ia8S_J.js";import{r as n,a as se}from"./react-vendor-Dc2dUCgt.js";import{u as ie,b as le,a as ce}from"./index-BuZ2PVIs.js";import{m as ue}from"./framer-motion-BW_lnxQT.js";const he=()=>{const{user:l}=ie(),{mode:e}=le(),{products:R,clubs:c,addProduct:N,logConsumption:z,stockUsage:P}=ce(),[G,w]=n.useState(!1),[U,I]=n.useState(!1),[F,S]=n.useState(!1),[u,b]=n.useState(null),[k,O]=n.useState([]),[g,W]=n.useState({name:""}),[s,q]=n.useState({productId:"",quantity:0,clubId:""}),[m,T]=n.useState(new Date().toISOString().split("T")[0]),Y=()=>{W({name:""}),w(!0)},C=()=>{w(!1)},H=()=>{g.name?(N(g),C()):alert("Please fill all required fields for product.")},_=o=>{b(o),q({productId:o.id,clubId:l?.role==="admin"&&c.length>0?c[0].id:"",quantity:1}),I(!0)},f=()=>{I(!1),b(null)},K=()=>{s.productId&&s.clubId&&s.quantity&&l?.id?(z({...s,consumedBy:l.id,date:new Date}),f()):alert("Please fill all required fields for consumption log.")},Q=o=>{b(o),T(new Date().toISOString().split("T")[0]),S(!0)},L=()=>{S(!1),b(null),O([])};return se.useEffect(()=>{if(F&&u){const o=new Date(m).toDateString(),E=P.filter(a=>a.productId===u.id&&a.date.toDateString()===o).reduce((a,x)=>{const M=c.find(X=>X.id===x.clubId),j=M?M.name:"Unknown Club";return a[j]?a[j]+=x.quantity:a[j]=x.quantity,a},{}),V=Object.entries(E).map(([a,x])=>({clubName:a,quantity:x}));O(V)}},[m,u,P,F,c]),r.jsxs(t,{sx:{height:"100vh",display:"flex",flexDirection:"column",background:e==="dark"?"#0F172A":"#FFFFFF",position:"relative"},children:[r.jsx(t,{sx:{p:3,borderBottom:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",background:e==="dark"?"#1E293B":"#F8FAFC",backdropFilter:"blur(20px)"},children:r.jsx(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:r.jsx(d,{variant:"h4",sx:{color:e==="dark"?"#3B82F6":"#2563EB",fontWeight:"bold"},children:"Inventory Management"})})}),r.jsx(t,{sx:{flexGrow:1,p:3,overflowY:"auto"},children:r.jsx(t,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:3},children:R.map((o,i)=>r.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:i*.1,ease:"easeOut"},children:r.jsxs(Z,{onClick:()=>Q(o),sx:{height:"100%",display:"flex",flexDirection:"column",cursor:"pointer",background:e==="dark"?"#1E293B":"#F8FAFC",border:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",borderRadius:"16px",boxShadow:e==="dark"?"0 8px 32px rgba(0, 0, 0, 0.3)":"0 8px 32px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:e==="dark"?"0 12px 40px rgba(0, 0, 0, 0.4)":"0 12px 40px rgba(0, 0, 0, 0.15)"}},children:[r.jsx($,{sx:{flexGrow:1},children:r.jsx(d,{variant:"h6",component:"div",sx:{color:e==="dark"?"#3B82F6":"#2563EB",fontWeight:"bold",mb:1},children:o.name})}),l?.role==="admin"&&r.jsx(J,{sx:{justifyContent:"flex-end",p:1},children:r.jsx(ee,{onClick:E=>{E.stopPropagation(),_(o)},sx:{color:e==="dark"?"#3B82F6":"#2563EB","&:hover":{background:e==="dark"?"rgba(59, 130, 246, 0.1)":"rgba(37, 99, 235, 0.1)"}},children:r.jsx(re,{})})})]})},o.id))})}),r.jsxs(B,{open:G,onClose:C,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{background:e==="dark"?"#1E293B":"#F8FAFC",backdropFilter:"blur(20px)",border:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",borderRadius:"16px",boxShadow:e==="dark"?"0 8px 32px rgba(0, 0, 0, 0.3)":"0 8px 32px rgba(0, 0, 0, 0.1)",color:e==="dark"?"#F8FAFC":"#0F172A"}},children:[r.jsx(A,{sx:{color:e==="dark"?"#F8FAFC":"#0F172A",borderBottom:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",fontSize:"1.5rem",fontWeight:"bold"},children:"Add New Product"}),r.jsx(D,{dividers:!0,sx:{borderColor:e==="dark"?"#475569":"#E2E8F0"},children:r.jsx(y,{margin:"dense",label:"Product Name",type:"text",fullWidth:!0,variant:"outlined",value:g.name,onChange:o=>W({...g,name:o.target.value}),required:!0,InputLabelProps:{style:{color:e==="dark"?"#94A3B8":"#64748B"}},InputProps:{style:{color:e==="dark"?"#F8FAFC":"#0F172A"}},sx:{mb:2,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:e==="dark"?"#475569":"#E2E8F0"},"&:hover fieldset":{borderColor:e==="dark"?"#94A3B8":"#64748B"},"&.Mui-focused fieldset":{borderColor:e==="dark"?"#3B82F6":"#2563EB"}}}})}),r.jsxs(v,{sx:{background:e==="dark"?"#1E293B":"#F8FAFC",borderTop:e==="dark"?"1px solid #475569":"1px solid #E2E8F0"},children:[r.jsx(p,{onClick:C,sx:{color:e==="dark"?"#94A3B8":"#64748B"},children:"Cancel"}),r.jsx(p,{onClick:H,variant:"contained",sx:{background:e==="dark"?"linear-gradient(135deg, #3B82F6, #2563EB)":"linear-gradient(135deg, #2563EB, #1D4ED8)",color:"white",fontWeight:600,"&:hover":{background:e==="dark"?"linear-gradient(135deg, #2563EB, #1D4ED8)":"linear-gradient(135deg, #1D4ED8, #0C4A6E)"}},children:"Add Product"})]})]}),r.jsxs(B,{open:U,onClose:f,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{background:e==="dark"?"#1E293B":"#F8FAFC",backdropFilter:"blur(20px)",border:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",borderRadius:"16px",boxShadow:e==="dark"?"0 8px 32px rgba(0, 0, 0, 0.3)":"0 8px 32px rgba(0, 0, 0, 0.1)",color:e==="dark"?"#F8FAFC":"#0F172A"}},children:[r.jsxs(A,{sx:{color:e==="dark"?"#F8FAFC":"#0F172A",borderBottom:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",fontSize:"1.5rem",fontWeight:"bold"},children:["Log Consumption - ",u?.name]}),r.jsxs(D,{dividers:!0,sx:{borderColor:e==="dark"?"#475569":"#E2E8F0"},children:[r.jsxs(d,{variant:"body1",sx:{color:e==="dark"?"#F8FAFC":"#0F172A",mb:2},children:["Club: ",c.find(o=>o.id===s.clubId)?.name||"N/A"]}),r.jsx(y,{margin:"dense",label:"Quantity Consumed",type:"number",fullWidth:!0,variant:"outlined",value:s.quantity,onChange:o=>q({...s,quantity:parseInt(o.target.value)||0}),required:!0,InputLabelProps:{style:{color:e==="dark"?"#94A3B8":"#64748B"}},InputProps:{style:{color:e==="dark"?"#F8FAFC":"#0F172A"}},sx:{mb:2,"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:e==="dark"?"#475569":"#E2E8F0"},"&:hover fieldset":{borderColor:e==="dark"?"#94A3B8":"#64748B"},"&.Mui-focused fieldset":{borderColor:e==="dark"?"#3B82F6":"#2563EB"}}}})]}),r.jsxs(v,{sx:{background:e==="dark"?"#1E293B":"#F8FAFC",borderTop:e==="dark"?"1px solid #475569":"1px solid #E2E8F0"},children:[r.jsx(p,{onClick:f,sx:{color:e==="dark"?"#94A3B8":"#64748B"},children:"Cancel"}),r.jsx(p,{onClick:K,variant:"contained",sx:{background:e==="dark"?"linear-gradient(135deg, #F59E0B, #D97706)":"linear-gradient(135deg, #D97706, #B45309)",color:"white",fontWeight:600,"&:hover":{background:e==="dark"?"linear-gradient(135deg, #D97706, #B45309)":"linear-gradient(135deg, #B45309, #9A3412)"}},children:"Log Consumption"})]})]}),r.jsxs(B,{open:F,onClose:L,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{background:e==="dark"?"#1E293B":"#F8FAFC",backdropFilter:"blur(20px)",border:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",borderRadius:"16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",color:e==="dark"?"#F8FAFC":"#0F172A"}},children:[r.jsx(A,{sx:{color:e==="dark"?"#F8FAFC":"#0F172A",borderBottom:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",p:3},children:r.jsxs(h,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[r.jsxs(d,{variant:"h5",component:"div",sx:{fontWeight:"bold"},children:[u?.name," - Consumption Details"]}),r.jsx(y,{type:"date",value:m,onChange:o=>T(o.target.value),InputProps:{sx:{color:e==="dark"?"#F8FAFC":"#0F172A","& .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#475569":"#E2E8F0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#94A3B8":"#64748B"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#3B82F6":"#2563EB"}}},sx:{width:200}})]})}),r.jsx(D,{dividers:!0,sx:{borderColor:e==="dark"?"#475569":"#E2E8F0",p:3},children:k.length>0?r.jsxs(h,{spacing:2,children:[k.map((o,i)=>r.jsx(oe,{elevation:0,sx:{p:2,background:e==="dark"?"rgba(30, 41, 59, 0.5)":"rgba(248, 250, 252, 0.5)",border:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",borderRadius:2,backdropFilter:"blur(10px)"},children:r.jsxs(h,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[r.jsxs(t,{children:[r.jsx(d,{variant:"h6",sx:{color:e==="dark"?"#F8FAFC":"#0F172A",fontWeight:"medium"},children:o.clubName}),r.jsx(d,{variant:"body2",sx:{color:e==="dark"?"#94A3B8":"#64748B",mt:.5},children:"Club Consumption"})]}),r.jsx(t,{sx:{background:e==="dark"?"rgba(59, 130, 246, 0.1)":"rgba(37, 99, 235, 0.1)",px:2,py:1,borderRadius:2},children:r.jsxs(d,{variant:"h6",sx:{color:e==="dark"?"#3B82F6":"#2563EB",fontWeight:"bold"},children:[o.quantity," units"]})})]})},i)),r.jsxs(t,{sx:{mt:3},children:[r.jsx(de,{sx:{borderColor:e==="dark"?"#475569":"#E2E8F0"}}),r.jsxs(h,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mt:2},children:[r.jsx(d,{variant:"h6",sx:{color:e==="dark"?"#F8FAFC":"#0F172A",fontWeight:"bold"},children:"Total Consumption"}),r.jsx(t,{sx:{background:e==="dark"?"rgba(245, 158, 11, 0.1)":"rgba(217, 119, 6, 0.1)",px:3,py:1.5,borderRadius:2},children:r.jsxs(d,{variant:"h5",sx:{color:e==="dark"?"#F59E0B":"#D97706",fontWeight:"bold"},children:[k.reduce((o,i)=>o+i.quantity,0)," units"]})})]})]})]}):r.jsxs(t,{sx:{py:8,textAlign:"center",color:e==="dark"?"#94A3B8":"#64748B"},children:[r.jsx(d,{variant:"h6",children:"No consumption recorded for this product on the selected date."}),r.jsx(d,{variant:"body2",sx:{mt:1},children:"Try selecting a different date to view consumption details."})]})}),r.jsx(v,{sx:{background:e==="dark"?"#1E293B":"#F8FAFC",borderTop:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",p:2},children:r.jsx(p,{onClick:L,variant:"outlined",sx:{color:e==="dark"?"#94A3B8":"#64748B",borderColor:e==="dark"?"#475569":"#E2E8F0","&:hover":{borderColor:e==="dark"?"#94A3B8":"#64748B",background:e==="dark"?"rgba(148, 163, 184, 0.1)":"rgba(100, 116, 139, 0.1)"}},children:"Close"})})]}),l?.role==="super_admin"&&r.jsx(te,{title:"Add Product",placement:"left",children:r.jsx(ae,{color:"primary",onClick:Y,sx:{position:"fixed",bottom:32,right:32,background:e==="dark"?"linear-gradient(135deg, #3b82f6, #2563eb)":"linear-gradient(135deg, #2563eb, #1d4ed8)",color:"white",boxShadow:e==="dark"?"0 4px 12px rgba(59, 130, 246, 0.5)":"0 4px 12px rgba(37, 99, 235, 0.5)","&:hover":{background:e==="dark"?"linear-gradient(135deg, #2563eb, #1d4ed8)":"linear-gradient(135deg, #1d4ed8, #1e40af)",boxShadow:e==="dark"?"0 6px 16px rgba(59, 130, 246, 0.6)":"0 6px 16px rgba(37, 99, 235, 0.6)"}},children:r.jsx(ne,{})})})]})};export{he as InventoryPage};
