import{j as e,b as d,d as n,a5 as a,B as w,M as z,au as y,Z as k,ac as $,ad as N,ae as R,af as A,ag as l,ah as L,t as U,q as _,e as H,U as V,V as q,W as G,X,Y,a9 as I,aa as v,ab as B,w as F,$ as Z,_ as O}from"./mui-vendor-B9ia8S_J.js";import{r as C}from"./react-vendor-Dc2dUCgt.js";import{a as J,b as K,u as Q}from"./index-BuZ2PVIs.js";import{M as c}from"./ModernCard-OCZcHO9e.js";import{m as ee}from"./framer-motion-BW_lnxQT.js";const se=()=>{const{expenses:T,clubs:x,currentClub:m}=J(),{mode:r}=K(),{user:j}=Q(),[f,M]=C.useState(new Date),[D,u]=C.useState(!1),[t,i]=C.useState({name:"",amount:"",paymentType:"cash",clubId:m?.id||""}),E=j?.role==="super_admin"?x:x.filter(o=>o.id===m?.id||o.createdBy===j?.id),b=T.filter(o=>{const g=new Date(o.date).toDateString()===f.toDateString(),P=E.some(W=>W.id===o.clubId);return g&&P}),h={totalClubs:E.length,totalExpenses:b.reduce((o,s)=>o+s.amount,0),cashTotal:b.filter(o=>o.paymentType==="cash").reduce((o,s)=>o+s.amount,0),upiTotal:b.filter(o=>o.paymentType==="upi").reduce((o,s)=>o+s.amount,0)},p=o=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(o),S=()=>{console.log("Adding expense:",t),u(!1),i({name:"",amount:"",paymentType:"cash",clubId:m?.id||""})};return e.jsxs(d,{sx:{p:3,position:"relative",minHeight:"100%"},children:[e.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(n,{variant:"h4",sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:"bold",mb:4},children:"Expense Management"})}),e.jsxs(a,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(a,{size:{xs:12,sm:6,md:3},children:e.jsx(c,{children:e.jsxs(d,{sx:{textAlign:"center"},children:[e.jsx(w,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontSize:32,mb:1}}),e.jsx(n,{variant:"h4",sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:"bold"},children:h.totalClubs}),e.jsx(n,{variant:"body2",sx:{color:r==="dark"?"#94A3B8":"#64748B"},children:"Total Clubs"})]})})}),e.jsx(a,{size:{xs:12,sm:6,md:3},children:e.jsx(c,{children:e.jsxs(d,{sx:{textAlign:"center"},children:[e.jsx(z,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontSize:32,mb:1}}),e.jsx(n,{variant:"h4",sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:"bold"},children:p(h.totalExpenses)}),e.jsx(n,{variant:"body2",sx:{color:r==="dark"?"#94A3B8":"#64748B"},children:"Total Expenses"})]})})}),e.jsx(a,{size:{xs:12,sm:6,md:3},children:e.jsx(c,{children:e.jsxs(d,{sx:{textAlign:"center"},children:[e.jsx(y,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontSize:32,mb:1}}),e.jsx(n,{variant:"h4",sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:"bold"},children:p(h.cashTotal)}),e.jsx(n,{variant:"body2",sx:{color:r==="dark"?"#94A3B8":"#64748B"},children:"Cash Payments"})]})})}),e.jsx(a,{size:{xs:12,sm:6,md:3},children:e.jsx(c,{children:e.jsxs(d,{sx:{textAlign:"center"},children:[e.jsx(y,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontSize:32,mb:1}}),e.jsx(n,{variant:"h4",sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:"bold"},children:p(h.upiTotal)}),e.jsx(n,{variant:"body2",sx:{color:r==="dark"?"#94A3B8":"#64748B"},children:"UPI Payments"})]})})})]}),e.jsxs(c,{children:[e.jsx(d,{sx:{mb:4},children:e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(n,{variant:"h6",sx:{color:r==="dark"?"#3b82f6":"#2563eb"},children:["Expense Records for ",f.toLocaleDateString()]}),e.jsx(d,{sx:{width:"200px"},children:e.jsx(k,{type:"date",size:"small",value:f.toISOString().split("T")[0],onChange:o=>M(new Date(o.target.value)),fullWidth:!0,InputProps:{sx:{color:r==="dark"?"#F8FAFC":"#0F172A","& .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#475569":"#E2E8F0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#3b82f6":"#2563eb"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#3b82f6":"#2563eb"}}}})})]})}),e.jsx($,{children:e.jsxs(N,{children:[e.jsx(R,{children:e.jsxs(A,{children:[e.jsx(l,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:"Club"}),e.jsx(l,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:"Expense Name"}),e.jsx(l,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:"Amount"}),e.jsx(l,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:"Payment Type"})]})}),e.jsx(L,{children:b.map(o=>{const s=x.find(g=>g.id===o.clubId);return e.jsxs(A,{children:[e.jsx(l,{sx:{borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(U,{sx:{bgcolor:r==="dark"?"#3b82f6":"#2563eb"},children:s?.name.charAt(0)}),e.jsx(n,{sx:{color:r==="dark"?"#F8FAFC":"#0F172A"},children:s?.name})]})}),e.jsx(l,{sx:{color:r==="dark"?"#F8FAFC":"#0F172A",borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:o.name}),e.jsx(l,{sx:{borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:e.jsx(n,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:"bold"},children:p(o.amount)})}),e.jsx(l,{sx:{borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:e.jsx(_,{label:o.paymentType.toUpperCase(),sx:{bgcolor:r==="dark"?"#3b82f620":"#2563eb20",color:r==="dark"?"#3b82f6":"#2563eb",fontWeight:600,borderRadius:"6px"}})})]},o.id)})})]})})]}),e.jsx(H,{title:"Add Expense",placement:"left",children:e.jsx(V,{color:"primary",onClick:()=>u(!0),sx:{position:"fixed",bottom:32,right:32,background:r==="dark"?"linear-gradient(135deg, #3b82f6, #2563eb)":"linear-gradient(135deg, #2563eb, #1d4ed8)",color:"white",boxShadow:r==="dark"?"0 4px 12px rgba(59, 130, 246, 0.5)":"0 4px 12px rgba(37, 99, 235, 0.5)","&:hover":{background:r==="dark"?"linear-gradient(135deg, #2563eb, #1d4ed8)":"linear-gradient(135deg, #1d4ed8, #1e40af)",boxShadow:r==="dark"?"0 6px 16px rgba(59, 130, 246, 0.6)":"0 6px 16px rgba(37, 99, 235, 0.6)"}},children:e.jsx(q,{})})}),e.jsxs(G,{open:D,onClose:()=>u(!1),PaperProps:{sx:{bgcolor:r==="dark"?"#1E293B":"#FFFFFF",backgroundImage:"none"}},children:[e.jsx(X,{sx:{color:r==="dark"?"#3b82f6":"#2563eb",borderBottom:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:"Add New Expense"}),e.jsx(Y,{sx:{mt:2},children:e.jsxs(a,{container:!0,spacing:2,children:[j?.role==="super_admin"&&e.jsx(a,{size:{xs:12},children:e.jsxs(I,{fullWidth:!0,children:[e.jsx(v,{sx:{color:r==="dark"?"#94A3B8":"#64748B"},children:"Club"}),e.jsx(B,{value:t.clubId,onChange:o=>i({...t,clubId:o.target.value}),sx:{color:r==="dark"?"#F8FAFC":"#0F172A","& .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#475569":"#E2E8F0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#3b82f6":"#2563eb"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#3b82f6":"#2563eb"}},children:x.map(o=>e.jsx(F,{value:o.id,children:o.name},o.id))})]})}),e.jsx(a,{size:{xs:12},children:e.jsx(k,{fullWidth:!0,label:"Expense Name",value:t.name,onChange:o=>i({...t,name:o.target.value}),InputLabelProps:{sx:{color:r==="dark"?"#94A3B8":"#64748B"}},InputProps:{sx:{color:r==="dark"?"#F8FAFC":"#0F172A","& .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#475569":"#E2E8F0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#3b82f6":"#2563eb"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#3b82f6":"#2563eb"}}}})}),e.jsx(a,{size:{xs:12},children:e.jsx(k,{fullWidth:!0,label:"Amount",type:"number",value:t.amount,onChange:o=>i({...t,amount:o.target.value}),InputLabelProps:{sx:{color:r==="dark"?"#94A3B8":"#64748B"}},InputProps:{sx:{color:r==="dark"?"#F8FAFC":"#0F172A","& .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#475569":"#E2E8F0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#3b82f6":"#2563eb"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#3b82f6":"#2563eb"}}}})}),e.jsx(a,{size:{xs:12},children:e.jsxs(I,{fullWidth:!0,children:[e.jsx(v,{sx:{color:r==="dark"?"#94A3B8":"#64748B"},children:"Payment Type"}),e.jsxs(B,{value:t.paymentType,onChange:o=>i({...t,paymentType:o.target.value}),sx:{color:r==="dark"?"#F8FAFC":"#0F172A","& .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#475569":"#E2E8F0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#3b82f6":"#2563eb"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:r==="dark"?"#3b82f6":"#2563eb"}},children:[e.jsx(F,{value:"cash",children:"Cash"}),e.jsx(F,{value:"upi",children:"UPI"})]})]})})]})}),e.jsxs(Z,{sx:{p:2,borderTop:`1px solid ${r==="dark"?"#475569":"#E2E8F0"}`},children:[e.jsx(O,{onClick:()=>u(!1),sx:{color:r==="dark"?"#94A3B8":"#64748B"},children:"Cancel"}),e.jsx(O,{variant:"contained",onClick:S,sx:{background:r==="dark"?"linear-gradient(135deg, #3b82f6, #2563eb)":"linear-gradient(135deg, #2563eb, #1d4ed8)",color:"white",fontWeight:600,"&:hover":{background:r==="dark"?"linear-gradient(135deg, #2563eb, #1d4ed8)":"linear-gradient(135deg, #1d4ed8, #1e40af)"}},children:"Add Expense"})]})]})]})};export{se as ExpensesPage};
