import{j as r,b as s,d as c,G as I,H,Z as x,a9 as F,aa as g,ab as k,w as n,ac as $,ad as G,ae as Y,af as S,ag as o,ah as _,t as U,ai as X,a1 as Z,q as M,f as J,O as K,W as Q,X as ee,Y as re,a5 as u,$ as ae,_ as O,e as te,U as oe,V as le}from"./mui-vendor-B9ia8S_J.js";import{r as m}from"./react-vendor-Dc2dUCgt.js";import{a as de,b as se}from"./index-CqppG3Ma.js";import{m as W}from"./framer-motion-BW_lnxQT.js";const xe=()=>{const{visitors:D,clubs:f,addVisitor:T,updateVisitor:w}=de(),{mode:e}=se(),[P,y]=m.useState(!1),[p,B]=m.useState(null),[j,V]=m.useState("all"),[A,z]=m.useState(""),[t,i]=m.useState({name:"",mobile:"",email:"",address:"",referralSource:"",type:"visitor",clubId:"",amount:0,paymentStatus:"pending"}),h=D.filter(a=>{const l=j==="all"||a.type===j,d=a.name.toLowerCase().includes(A.toLowerCase())||a.mobile.includes(A);return l&&d}),v=a=>{switch(a){case"member":return e==="dark"?"#3B82F6":"#2563EB";case"trial":return e==="dark"?"#F59E0B":"#D97706";default:return e==="dark"?"#94A3B8":"#64748B"}},L=a=>{switch(a){case"member":return"Member";case"trial":return"Trial";default:return"Visitor"}},R=a=>{switch(a){case"completed":return"#4CAF50";case"partial":return"#FF9800";default:return"#F44336"}},E=a=>{a?(B(a),i({name:a.name,mobile:a.mobile,email:a.email||"",address:a.address||"",referralSource:a.referralSource||"",type:a.type,clubId:a.clubId,amount:a.payments?.reduce((l,d)=>l+d.amount,0)||0,paymentStatus:a.payments?.[0]?.status||"pending"})):(B(null),i({name:"",mobile:"",email:"",address:"",referralSource:"",type:"visitor",clubId:f[0]?.id||"",amount:0,paymentStatus:"pending"})),y(!0)},C=()=>{y(!1),B(null)},N=()=>{const a=new Date,l=t.type==="trial"?"trial":t.type==="member"?"membership":"other",d={...t,visitDate:a,payments:[{id:p?.payments?.[0]?.id||`payment_${Date.now()}`,amount:t.amount,type:l,status:t.paymentStatus,date:a,visitorId:p?.id||`visitor_${Date.now()}`,clubId:t.clubId}]};p?w(p.id,d):T(d),C()},b={total:h.length,visitors:h.filter(a=>a.type==="visitor").length,trials:h.filter(a=>a.type==="trial").length,members:h.filter(a=>a.type==="member").length,revenue:h.reduce((a,l)=>a+(l.payments?.filter(d=>d.status==="completed").reduce((d,q)=>d+q.amount,0)||0),0)};return r.jsxs(s,{sx:{height:"100vh",display:"flex",flexDirection:"column",background:e==="dark"?"#0F172A":"#FFFFFF",position:"relative"},children:[r.jsxs(s,{sx:{p:3,borderBottom:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",background:e==="dark"?"#1E293B":"#F8FAFC",backdropFilter:"blur(20px)"},children:[r.jsx(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:r.jsx(c,{variant:"h4",sx:{color:e==="dark"?"#3B82F6":"#2563EB",fontWeight:"bold"},children:"Visitor Management"})}),r.jsx(s,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(4, 1fr)"},gap:2,mt:3},children:[{title:"Total Visitors",value:b.total},{title:"Members",value:b.members},{title:"Trials",value:b.trials},{title:"Revenue",value:`â‚¹${b.revenue.toLocaleString()}`}].map((a,l)=>r.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:l*.1,ease:"easeOut"},children:r.jsx(I,{sx:{background:e==="dark"?"#1E293B":"#F8FAFC",border:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",borderRadius:"12px",transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:e==="dark"?"0 12px 40px rgba(0, 0, 0, 0.4)":"0 12px 40px rgba(0, 0, 0, 0.15)"}},children:r.jsxs(H,{sx:{textAlign:"center"},children:[r.jsx(c,{variant:"h6",sx:{color:e==="dark"?"#94A3B8":"#64748B",mb:.5},children:a.title}),r.jsx(c,{variant:"h4",sx:{color:e==="dark"?"#3B82F6":"#2563EB",fontWeight:"bold"},children:a.value})]})})},l))})]}),r.jsxs(s,{sx:{flexGrow:1,p:3,overflowY:"auto"},children:[r.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,gap:2,flexDirection:{xs:"column",sm:"row"}},children:[r.jsx(x,{fullWidth:!0,placeholder:"Search visitors by name or mobile...",value:A,onChange:a=>z(a.target.value),variant:"outlined",size:"small",InputProps:{style:{color:e==="dark"?"#F8FAFC":"#0F172A"},sx:{"& fieldset":{borderColor:e==="dark"?"#475569":"#E2E8F0",borderWidth:1},"&:hover fieldset":{borderColor:e==="dark"?"#94A3B8":"#64748B"},"&.Mui-focused fieldset":{borderColor:e==="dark"?"#3B82F6":"#2563EB",borderWidth:2},borderRadius:2}},sx:{mr:{xs:0,sm:2},mb:{xs:2,sm:0},"& .MuiInputBase-input::placeholder":{color:e==="dark"?"#94A3B8":"#64748B",opacity:1}}}),r.jsxs(F,{sx:{minWidth:120,mb:{xs:2,sm:0}},size:"small",children:[r.jsx(g,{sx:{color:e==="dark"?"#94A3B8":"#64748B"},children:"Filter by Type"}),r.jsxs(k,{value:j,label:"Filter by Type",onChange:a=>V(a.target.value),sx:{color:e==="dark"?"#F8FAFC":"#0F172A","& .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#475569":"#E2E8F0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#94A3B8":"#64748B"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#3B82F6":"#2563EB"},"& .MuiSvgIcon-root":{color:e==="dark"?"#94A3B8":"#64748B"}},children:[r.jsx(n,{value:"all",children:"All Types"}),r.jsx(n,{value:"visitor",children:"Visitor"}),r.jsx(n,{value:"trial",children:"Trial"}),r.jsx(n,{value:"member",children:"Member"})]})]})]}),r.jsx($,{component:I,sx:{background:e==="dark"?"#1E293B":"#F8FAFC",border:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",borderRadius:"16px",boxShadow:e==="dark"?"0 8px 32px rgba(0, 0, 0, 0.3)":"0 8px 32px rgba(0, 0, 0, 0.1)",maxHeight:"calc(100vh - 300px)"},children:r.jsxs(G,{stickyHeader:!0,"aria-label":"visitors table",children:[r.jsx(Y,{children:r.jsxs(S,{sx:{background:e==="dark"?"#334155":"#F1F5F9"},children:[r.jsx(o,{sx:{color:e==="dark"?"#F8FAFC":"#0F172A",fontWeight:"bold",borderBottom:"none"},children:"Name"}),r.jsx(o,{sx:{color:e==="dark"?"#F8FAFC":"#0F172A",fontWeight:"bold",borderBottom:"none"},children:"Club & Location"}),r.jsx(o,{sx:{color:e==="dark"?"#F8FAFC":"#0F172A",fontWeight:"bold"},children:"Contact"}),r.jsx(o,{sx:{color:e==="dark"?"#F8FAFC":"#0F172A",fontWeight:"bold"},children:"Type"}),r.jsx(o,{sx:{color:e==="dark"?"#F8FAFC":"#0F172A",fontWeight:"bold"},children:"Payment Status"}),r.jsx(o,{sx:{color:e==="dark"?"#F8FAFC":"#0F172A",fontWeight:"bold"},children:"Date"}),r.jsx(o,{align:"right",sx:{color:e==="dark"?"#F8FAFC":"#0F172A",fontWeight:"bold"},children:"Actions"})]})}),r.jsx(_,{children:h.map((a,l)=>r.jsxs(S,{component:W.tr,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:l*.1},sx:{"&:nth-of-type(even)":{background:e==="dark"?"rgba(0,0,0,0.1)":"rgba(241,245,249,0.5)"}},children:[r.jsx(o,{children:r.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsx(U,{sx:{bgcolor:v(a.type),color:"#000"},children:a.name.charAt(0)}),r.jsxs(s,{children:[r.jsx(c,{sx:{color:e==="dark"?"#F8FAFC":"#0F172A",fontWeight:"medium"},children:a.name}),r.jsx(c,{variant:"body2",sx:{color:e==="dark"?"#94A3B8":"#64748B"},children:a.mobile})]})]})}),r.jsx(o,{children:r.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[r.jsx(c,{sx:{color:e==="dark"?"#F8FAFC":"#0F172A",fontWeight:"medium"},children:f.find(d=>d.id===a.clubId)?.name||"N/A"}),r.jsx(c,{variant:"body2",sx:{color:e==="dark"?"#94A3B8":"#64748B"},children:a.address})]})}),r.jsx(o,{children:r.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[r.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:.5,color:e==="dark"?"#94A3B8":"#64748B"},children:[r.jsx(X,{fontSize:"small"}),r.jsx(c,{variant:"body2",sx:{color:"inherit"},children:a.mobile})]}),a.email&&r.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:.5,color:e==="dark"?"#94A3B8":"#64748B"},children:[r.jsx(Z,{fontSize:"small"}),r.jsx(c,{variant:"body2",sx:{color:"inherit"},children:a.email})]})]})}),r.jsx(o,{children:r.jsx(M,{label:L(a.type),size:"small",sx:{bgcolor:v(a.type),color:e==="dark"?"#000":"#fff",fontWeight:600}})}),r.jsx(o,{children:r.jsx(M,{label:a.payments?.[0]?.status||"N/A",size:"small",sx:{bgcolor:R(a.payments?.[0]?.status||"pending"),color:"#fff",fontWeight:600}})}),r.jsx(o,{sx:{color:e==="dark"?"#F8FAFC":"#0F172A"},children:new Date(a.visitDate).toLocaleDateString()}),r.jsx(o,{align:"right",children:r.jsx(J,{onClick:()=>E(a),sx:{color:e==="dark"?"#3B82F6":"#2563EB"},children:r.jsx(K,{})})})]},a.id))})]})})]}),r.jsxs(Q,{open:P,onClose:C,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{background:e==="dark"?"#1E293B":"#F8FAFC",backdropFilter:"blur(20px)",border:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",borderRadius:"16px",boxShadow:e==="dark"?"0 8px 32px rgba(0, 0, 0, 0.3)":"0 8px 32px rgba(0, 0, 0, 0.1)",color:e==="dark"?"#F8FAFC":"#0F172A"}},children:[r.jsx(ee,{sx:{color:e==="dark"?"#F8FAFC":"#0F172A",borderBottom:e==="dark"?"1px solid #475569":"1px solid #E2E8F0",fontSize:"1.5rem",fontWeight:"bold"},children:p?"Edit Visitor":"Add New Visitor"}),r.jsx(re,{dividers:!0,sx:{borderColor:e==="dark"?"#475569":"#E2E8F0"},children:r.jsxs(u,{container:!0,spacing:2,sx:{mt:1},children:[r.jsx(u,{size:{xs:12,sm:6},children:r.jsx(x,{margin:"dense",label:"Name",type:"text",fullWidth:!0,variant:"outlined",value:t.name,onChange:a=>i({...t,name:a.target.value}),required:!0,InputLabelProps:{style:{color:e==="dark"?"#94A3B8":"#64748B"}},InputProps:{style:{color:e==="dark"?"#F8FAFC":"#0F172A"}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:e==="dark"?"#475569":"#E2E8F0"},"&:hover fieldset":{borderColor:e==="dark"?"#94A3B8":"#64748B"},"&.Mui-focused fieldset":{borderColor:e==="dark"?"#3B82F6":"#2563EB"}}}})}),r.jsx(u,{size:{xs:12,sm:6},children:r.jsx(x,{margin:"dense",label:"Mobile Number",type:"text",fullWidth:!0,variant:"outlined",value:t.mobile,onChange:a=>i({...t,mobile:a.target.value}),required:!0,InputLabelProps:{style:{color:e==="dark"?"#94A3B8":"#64748B"}},InputProps:{style:{color:e==="dark"?"#F8FAFC":"#0F172A"}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:e==="dark"?"#475569":"#E2E8F0"},"&:hover fieldset":{borderColor:e==="dark"?"#94A3B8":"#64748B"},"&.Mui-focused fieldset":{borderColor:e==="dark"?"#3B82F6":"#2563EB"}}}})}),r.jsx(u,{size:{xs:12},children:r.jsx(x,{margin:"dense",label:"Email Address (Optional)",type:"email",fullWidth:!0,variant:"outlined",value:t.email,onChange:a=>i({...t,email:a.target.value}),InputLabelProps:{style:{color:e==="dark"?"#94A3B8":"#64748B"}},InputProps:{style:{color:e==="dark"?"#F8FAFC":"#0F172A"}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:e==="dark"?"#475569":"#E2E8F0"},"&:hover fieldset":{borderColor:e==="dark"?"#94A3B8":"#64748B"},"&.Mui-focused fieldset":{borderColor:e==="dark"?"#3B82F6":"#2563EB"}}}})}),r.jsx(u,{size:{xs:12},children:r.jsx(x,{margin:"dense",label:"Address",type:"text",fullWidth:!0,variant:"outlined",value:t.address,onChange:a=>i({...t,address:a.target.value}),InputLabelProps:{style:{color:e==="dark"?"#94A3B8":"#64748B"}},InputProps:{style:{color:e==="dark"?"#F8FAFC":"#0F172A"}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:e==="dark"?"#475569":"#E2E8F0"},"&:hover fieldset":{borderColor:e==="dark"?"#94A3B8":"#64748B"},"&.Mui-focused fieldset":{borderColor:e==="dark"?"#3B82F6":"#2563EB"}}}})}),r.jsx(u,{size:{xs:12,sm:6},children:r.jsx(x,{margin:"dense",label:"Referral Source",type:"text",fullWidth:!0,variant:"outlined",value:t.referralSource,onChange:a=>i({...t,referralSource:a.target.value}),InputLabelProps:{style:{color:e==="dark"?"#94A3B8":"#64748B"}},InputProps:{style:{color:e==="dark"?"#F8FAFC":"#0F172A"}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:e==="dark"?"#475569":"#E2E8F0"},"&:hover fieldset":{borderColor:e==="dark"?"#94A3B8":"#64748B"},"&.Mui-focused fieldset":{borderColor:e==="dark"?"#3B82F6":"#2563EB"}}}})}),r.jsx(u,{size:{xs:12,sm:6},children:r.jsxs(F,{margin:"dense",fullWidth:!0,variant:"outlined",children:[r.jsx(g,{sx:{color:e==="dark"?"#94A3B8":"#64748B"},children:"Visitor Type"}),r.jsxs(k,{value:t.type,onChange:a=>i({...t,type:a.target.value}),label:"Visitor Type",sx:{color:e==="dark"?"#F8FAFC":"#0F172A","& .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#475569":"#E2E8F0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#94A3B8":"#64748B"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#3B82F6":"#2563EB"},"& .MuiSvgIcon-root":{color:e==="dark"?"#94A3B8":"#64748B"}},children:[r.jsx(n,{value:"visitor",children:"Visitor"}),r.jsx(n,{value:"trial",children:"Trial"}),r.jsx(n,{value:"member",children:"Member"})]})]})}),r.jsx(u,{size:{xs:12,sm:6},children:r.jsxs(F,{margin:"dense",fullWidth:!0,variant:"outlined",children:[r.jsx(g,{sx:{color:e==="dark"?"#94A3B8":"#64748B"},children:"Club"}),r.jsx(k,{value:t.clubId,onChange:a=>i({...t,clubId:a.target.value}),label:"Club",required:!0,sx:{color:e==="dark"?"#F8FAFC":"#0F172A","& .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#475569":"#E2E8F0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#94A3B8":"#64748B"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#3B82F6":"#2563EB"},"& .MuiSvgIcon-root":{color:e==="dark"?"#94A3B8":"#64748B"}},children:f.map(a=>r.jsx(n,{value:a.id,children:a.name},a.id))})]})}),r.jsx(u,{size:{xs:12,sm:6},children:r.jsx(x,{margin:"dense",label:"Amount (INR)",type:"number",fullWidth:!0,variant:"outlined",value:t.amount,onChange:a=>i({...t,amount:parseFloat(a.target.value)||0}),InputLabelProps:{style:{color:e==="dark"?"#94A3B8":"#64748B"}},InputProps:{style:{color:e==="dark"?"#F8FAFC":"#0F172A"}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:e==="dark"?"#475569":"#E2E8F0"},"&:hover fieldset":{borderColor:e==="dark"?"#94A3B8":"#64748B"},"&.Mui-focused fieldset":{borderColor:e==="dark"?"#3B82F6":"#2563EB"}}}})}),r.jsx(u,{size:{xs:12,sm:6},children:r.jsxs(F,{margin:"dense",fullWidth:!0,variant:"outlined",children:[r.jsx(g,{sx:{color:e==="dark"?"#94A3B8":"#64748B"},children:"Payment Status"}),r.jsxs(k,{value:t.paymentStatus,onChange:a=>i({...t,paymentStatus:a.target.value}),label:"Payment Status",sx:{color:e==="dark"?"#F8FAFC":"#0F172A","& .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#475569":"#E2E8F0"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#94A3B8":"#64748B"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:e==="dark"?"#3B82F6":"#2563EB"},"& .MuiSvgIcon-root":{color:e==="dark"?"#94A3B8":"#64748B"}},children:[r.jsx(n,{value:"pending",children:"Pending"}),r.jsx(n,{value:"partial",children:"Partial"}),r.jsx(n,{value:"completed",children:"Completed"})]})]})})]})}),r.jsxs(ae,{sx:{background:e==="dark"?"#1E293B":"#F8FAFC",borderTop:e==="dark"?"1px solid #475569":"1px solid #E2E8F0"},children:[r.jsx(O,{onClick:C,sx:{color:e==="dark"?"#94A3B8":"#64748B"},children:"Cancel"}),r.jsx(O,{onClick:N,variant:"contained",sx:{background:e==="dark"?"linear-gradient(135deg, #3B82F6, #2563EB)":"linear-gradient(135deg, #2563EB, #1D4ED8)",color:"white",fontWeight:600,"&:hover":{background:e==="dark"?"linear-gradient(135deg, #2563EB, #1D4ED8)":"linear-gradient(135deg, #1D4ED8, #0C4A6E)"}},children:p?"Update Visitor":"Add Visitor"})]})]}),r.jsx(te,{title:"Add Visitor",placement:"left",children:r.jsx(oe,{color:"primary",onClick:()=>E(),sx:{position:"fixed",bottom:32,right:32,background:e==="dark"?"linear-gradient(135deg, #3b82f6, #2563eb)":"linear-gradient(135deg, #2563eb, #1d4ed8)",color:"white",boxShadow:e==="dark"?"0 4px 12px rgba(59, 130, 246, 0.5)":"0 4px 12px rgba(37, 99, 235, 0.5)","&:hover":{background:e==="dark"?"linear-gradient(135deg, #2563eb, #1d4ed8)":"linear-gradient(135deg, #1d4ed8, #1e40af)",boxShadow:e==="dark"?"0 6px 16px rgba(59, 130, 246, 0.6)":"0 6px 16px rgba(37, 99, 235, 0.6)"}},children:r.jsx(le,{})})})]})};export{xe as VisitorsPage};
